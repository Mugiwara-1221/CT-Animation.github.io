<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Animation Drawing</title>
        <link rel="stylesheet" href="style.css">
        <style>
            .tools {
                position: fixed;
                top: 10px;
                right: 10px;
                background: white;
                padding: 10px;
                z-index: 100;
                display: flex;
                flex-direction: column;
                gap: 8px;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            }
            .tools button, .tools input {
                font-size: 14px;
            }
            label {
                font-size: 12px;
                margin-top: 5px;
            }
            canvas {
                position: absolute;
                top: 0;
                left: 0;
            }
        </style>
    </head>
    <body>
        <div class="toggleNavLeft"></div>
        <nav id="navLeft">
            <div class="nav-content">
                <span>Choose LineJoin style</span>
                <select class="line-join-select">
                    <option value="round">Round</option>
                    <option value="bevel">Bevel</option>
                    <option value="miter">Miter</option>
                </select>
                <button class="line-join-btn" type="button">Apply</button>
            </div>
            <div class="nav-content">
                <span>Choose LineWidth style</span>
                <input class="line-width-input" type="number" value="1">
                <button class="line-width-btn" type="button">Apply</button>
            </div>
            <div class="nav-content">
                <span>Choose Color</span>
                <input class="pick-color" type="color" name="drawing-color" value="#000000">
                <button class="color-btn" type="button">Apply</button>
            </div>

            <div class="table-info">
                <table>
                    <thead>
                        <tr>
                            <th>Line Join</th>
                            <th>Thickness</th>
                            <th>Color</th>    
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="line-join-info"></td>
                            <td class="line-width-info"></td>
                            <td class="color-info"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </nav>

        <div class="tools">
            <button onclick="setTool('draw')">Pen</button>
            <button onclick="setTool('erase')">Eraser</button>
            <button onclick="clearCanvas()">Clear</button>
            <button onclick="saveImage()">Save</button>
        </div>

        <canvas id="bgCanvas"></canvas>
        <canvas id="drawCanvas"></canvas>

        <script>
            const bgCanvas = document.getElementById("bgCanvas");
            const drawCanvas = document.getElementById("drawCanvas");
            const bgCtx = bgCanvas.getContext("2d");
            const ctx = drawCanvas.getContext("2d");

            const colorInput = document.querySelector(".pick-color");
            const lineWidthInput = document.querySelector(".line-width-input");
            const colorBtn = document.querySelector(".color-btn");
            const lineWidthBtn = document.querySelector(".line-width-btn");

            let drawing = false;
            let currentTool = "draw";
            let brushSize = parseInt(lineWidthInput.value);
            let brushColor = colorInput.value;
            let prevX = null;
            let prevY = null;

            bgCanvas.width = drawCanvas.width = window.innerWidth;
            bgCanvas.height = drawCanvas.height = window.innerHeight;

            const img = new Image();
            img.src = "your-background.jpg"; // replace with your image path
            img.onload = () => {
                bgCtx.drawImage(img, 0, 0, bgCanvas.width, bgCanvas.height);
            };

            drawCanvas.addEventListener("mousedown", (e) => {
                drawing = true;
                [prevX, prevY] = getPos(e);
            });

            drawCanvas.addEventListener("mouseup", () => {
                drawing = false;
                prevX = prevY = null;
            });

            drawCanvas.addEventListener("mouseout", () => {
                drawing = false;
                prevX = prevY = null;
            });

            drawCanvas.addEventListener("mousemove", draw);

            drawCanvas.addEventListener("touchstart", (e) => {
                drawing = true;
                [prevX, prevY] = getPos(e.touches[0]);
            });

            drawCanvas.addEventListener("touchend", () => {
                drawing = false;
                prevX = prevY = null;
            });

            drawCanvas.addEventListener("touchcancel", () => {
                drawing = false;
                prevX = prevY = null;
            });

            drawCanvas.addEventListener("touchmove", (e) => {
                e.preventDefault();
                draw(e.touches[0]);
            }, { passive: false });

            function getPos(e) {
                const rect = drawCanvas.getBoundingClientRect();
                return [e.clientX - rect.left, e.clientY - rect.top];
            }

            function setTool(tool) {
                currentTool = tool;
            }

            function draw(e) {
                if (!drawing) return;
                const [x, y] = getPos(e);

                ctx.lineWidth = brushSize;
                ctx.lineCap = "round";

                if (currentTool === "erase") {
                    ctx.globalCompositeOperation = "destination-out";
                } else {
                    ctx.globalCompositeOperation = "source-over";
                    ctx.strokeStyle = brushColor;
                }

                ctx.beginPath();
                ctx.moveTo(prevX ?? x, prevY ?? y);
                ctx.lineTo(x, y);
                ctx.stroke();

                prevX = x;
                prevY = y;
            }

            function clearCanvas() {
                ctx.clearRect(0, 0, drawCanvas.width, drawCanvas.height);
            }

            function saveImage() {
                const mergedCanvas = document.createElement("canvas");
                mergedCanvas.width = drawCanvas.width;
                mergedCanvas.height = drawCanvas.height;
                const mergedCtx = mergedCanvas.getContext("2d");

                mergedCtx.drawImage(bgCanvas, 0, 0);
                mergedCtx.drawImage(drawCanvas, 0, 0);

                const link = document.createElement('a');
                link.download = 'my_drawing.png';
                link.href = mergedCanvas.toDataURL();
                link.click();
            }

            colorBtn.addEventListener("click", () => {
                brushColor = colorInput.value;
                document.querySelector(".color-info").textContent = brushColor;
            });

            lineWidthBtn.addEventListener("click", () => {
                brushSize = parseInt(lineWidthInput.value);
                document.querySelector(".line-width-info").textContent = brushSize;
            });
        </script>
    </body>
</html>

<!-- <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Animation Drawing</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="toggleNavLeft"></div>
        <nav id="navLeft">
            <div class="nav-content">
                <span>Choose LineJoin style</span>
                <select class="line-join-select">
                    <option value="round">Round</option>
                    <option value="bevel">Bevel</option>
                    <option value="miter">Miter</option>
                </select>
                <button class="line-join-btn" type="button">Apply</button>
            </div>
            <div class="nav-content">
                <span>Choose LineWidth style</span>
                <input class="line-width-input" type="number" value="1">
                <button class="line-width-btn" type="button">Apply</button>
            </div>
            <div class="nav-content">
                <span>Choose Color</span>
                <input class="pick-color" type="color" name="drawing-color" value="#000000">
                <button class="color-btn" type="button">Apply</button>
            </div>

            <div class="table-info">
                <table>
                    <thead>
                        <tr>
                            <th>Line Join</th>
                            <th>Thickness</th>
                            <th>Color</th>    
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="line-join-info"></td>
                            <td class="line-width-info"></td>
                            <td class="color-info"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </nav>

        <canvas id="canvas"></canvas>

        <script src="script.js"></script>
    </body>
</html> -->
